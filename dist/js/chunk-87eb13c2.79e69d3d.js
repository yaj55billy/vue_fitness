(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-87eb13c2"],{"62b3":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page"},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}},[e("div",{staticClass:"loadingio-spinner-ball-h1u60i2wsu"},[e("div",{staticClass:"ldio-ivekc1fyg2"},[e("div")])])]),e("navbar"),e("section",{staticClass:"section"},[e("div",{staticClass:"cart-page"},[e("div",{staticClass:"container"},[e("ul",{staticClass:"shop-step"},[e("li",{staticClass:"shop-step__list",class:{complete:!t.cartsEmpty}},[e("div",{staticClass:"shop-step__num"},[t._v("1")]),e("div",[t._v("訂單")])]),t._m(0),t._m(1)]),e("div",{staticClass:"cart-title"},[e("h2",{},[t._v("訂單")]),e("router-link",{staticClass:"btn btn-outline-primary btn-md rounded-pill",attrs:{to:"/products"}},[t._v(" 繼續購物 ")])],1),!0===t.cartsEmpty?e("div",{},[t._m(2)]):e("div",[e("ul",{staticClass:"cart-info"},t._l(t.carts,(function(a){return e("li",{key:a.product.id+1,staticClass:"cart-info__list"},[e("div",{staticClass:"cart-info__pic"},[e("img",{attrs:{src:a.product.imageUrl[0],alt:""}})]),e("div",{staticClass:"cart-info__con"},[e("h4",{staticClass:"cart-info__title"},[t._v(t._s(a.product.title))]),e("div",{staticClass:"cart-info__count"},[e("button",{staticClass:"btn-cart",attrs:{type:"button",disabled:1===a.quantity},on:{click:function(e){a.quantity--,t.editCartItemNum(a.product.id,a.quantity)}}},[t._v(" - ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"item.quantity"}],staticClass:"cart-info__input",attrs:{type:"number",min:"1"},domProps:{value:a.quantity},on:{input:function(e){e.target.composing||t.$set(a,"quantity",e.target.value)}}}),e("button",{staticClass:"btn-cart",attrs:{type:"button"},on:{click:function(e){a.quantity++,t.editCartItemNum(a.product.id,a.quantity)}}},[t._v(" + ")])])]),e("div",{staticClass:"cart-info__price"},[t._v(" $"+t._s(t._f("toThousands")(a.product.price))+" ")]),e("div",{staticClass:"cart-info__close",on:{click:function(e){return t.deleteCartItem(a.product.id)}}},[e("i",{staticClass:"far fa-trash-alt"})])])})),0),e("div",{staticClass:"row cart-footer"},[t._m(3),e("div",{staticClass:"col-md-4 cart-footer__total"},[e("div",{staticClass:"cart-footer__total--item"},[e("p",{staticClass:"mb-0"},[t._v("小計")]),e("p",{staticClass:"mb-0"},[t._v("$ "+t._s(t._f("toThousands")(t.cartTotal)))])]),e("div",{staticClass:"cart-footer__total--item mt-2"},[e("p",{staticClass:"mb-0 h4 font-weight-bold"},[t._v("總計")]),e("p",{staticClass:"mb-0 h4 font-weight-bold"},[t._v("$ "+t._s(t._f("toThousands")(t.cartTotal)))])])])]),e("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(a){var s=a.invalid;return[e("form",{staticClass:"form mt-5",on:{submit:function(a){return a.preventDefault(),t.createOrder()}}},[e("h3",{staticClass:"text-left"},[t._v("填寫資料")]),e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,i=a.classes;return[e("label",{staticClass:"text-left w-100",attrs:{for:"username"}},[t._v("收件人姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formdata.name,expression:"formdata.name"}],staticClass:"form-control",class:i,attrs:{id:"username",type:"text",name:"收件人姓名"},domProps:{value:t.formdata.name},on:{input:function(a){a.target.composing||t.$set(t.formdata,"name",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,i=a.classes;return[e("label",{staticClass:"text-left w-100",attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formdata.email,expression:"formdata.email"}],staticClass:"form-control",class:i,attrs:{id:"email",type:"email",name:"信箱"},domProps:{value:t.formdata.email},on:{input:function(a){a.target.composing||t.$set(t.formdata,"email",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required|min:8"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,i=a.classes;return[e("label",{staticClass:"text-left w-100",attrs:{for:"tel"}},[t._v("電話")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formdata.tel,expression:"formdata.tel"}],staticClass:"form-control",class:i,attrs:{id:"tel",type:"tel",name:"電話"},domProps:{value:t.formdata.tel},on:{input:function(a){a.target.composing||t.$set(t.formdata,"tel",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,i=a.classes;return[e("label",{staticClass:"text-left w-100",attrs:{for:"addr"}},[t._v("地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formdata.address,expression:"formdata.address"}],staticClass:"form-control",class:i,attrs:{id:"addr",type:"text",name:"地址"},domProps:{value:t.formdata.address},on:{input:function(a){a.target.composing||t.$set(t.formdata,"address",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("label",{staticClass:"text-left w-100",attrs:{for:"pay-method"}},[t._v("購買方式")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.formdata.payment,expression:"formdata.payment"}],staticClass:"form-control",attrs:{name:"付款方式",id:"pay-method",required:"required"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.formdata,"payment",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"",disabled:"disabled",selected:""}},[t._v("請選擇付款方式")]),e("option",{attrs:{value:"WebATM"}},[t._v("WebATM")]),e("option",{attrs:{value:"ATM"}},[t._v("ATM")]),e("option",{attrs:{value:"Barcode"}},[t._v("Barcode")]),e("option",{attrs:{value:"Credit"}},[t._v("Credit")]),e("option",{attrs:{value:"ApplePay"}},[t._v("ApplePay")]),e("option",{attrs:{value:"GooglePay"}},[t._v("GooglePay")])])]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"text-left w-100",attrs:{for:"message"}},[t._v("留言")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formdata.message,expression:"formdata.message"}],staticClass:"form-control",attrs:{name:"message",id:"",cols:"30",rows:"3"},domProps:{value:t.formdata.message},on:{input:function(a){a.target.composing||t.$set(t.formdata,"message",a.target.value)}}})]),e("div",{staticClass:"btn-area right"},[e("button",{staticClass:"btn btn-primary rounded-pill btn-xl",attrs:{type:"submit",disabled:s}},[t._v("前往結帳")])])])]}}])})],1)])])]),e("pagebottom")],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("li",{staticClass:"shop-step__list"},[e("div",{staticClass:"shop-step__num"},[t._v("2")]),e("div",[t._v("付款")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("li",{staticClass:"shop-step__list"},[e("div",{staticClass:"shop-step__num"},[t._v("3")]),e("div",[t._v("完成")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cart-empty"},[e("h2",{staticClass:"cart-empty__title"},[t._v(" QQ~~"),e("br"),t._v(" 購物車內沒有商品，"),e("br"),t._v(" 點擊上方按鈕去物色喜歡的課程吧 ! ")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-md-8 cart-footer__coupon"},[e("div",{staticClass:"input-group"},[e("input",{staticClass:"form-control rounded-0 border-bottom\n                border-top-0 border-left-0 border-right-0 shadow-none",attrs:{type:"text",placeholder:"折價券"}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-dark border-bottom\n                  border-top-0 border-left-0 border-right-0 rounded-0",attrs:{type:"button",id:"button-addon2"}},[e("i",{staticClass:"fas fa-paper-plane"})])])])])}],r=(e("99af"),e("4160"),e("159b"),e("5530")),o=e("d178"),n=e("fd2d"),l={components:{navbar:o["a"],pagebottom:n["a"]},data:function(){return{carts:[],cartTotal:0,cartsEmpty:!1,isLoading:!1,formdata:{name:"",email:"",tel:"",address:"",payment:"",message:""}}},created:function(){this.getCart()},methods:{getCart:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api","/").concat("e6527241-dd52-4bd8-94eb-eb0e02127c72","/ec/shopping");this.axios.get(a).then((function(a){0===a.data.data.length?(t.cartsEmpty=!0,t.isLoading=!1):(t.carts=a.data.data,t.updateTotal(),t.isLoading=!1)}))},updateTotal:function(){var t=this;this.cartTotal=0,this.carts.forEach((function(a){t.cartTotal+=a.product.price*a.quantity}))},deleteCartItem:function(t){var a=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io/api","/").concat("e6527241-dd52-4bd8-94eb-eb0e02127c72","/ec/shopping/").concat(t);this.axios.delete(e).then((function(){a.getCart(),a.isLoading=!1})).catch((function(){a.isLoading=!1}))},editCartItemNum:function(t,a){var e=this;this.isLoading=!0;var s="".concat("https://course-ec-api.hexschool.io/api","/").concat("e6527241-dd52-4bd8-94eb-eb0e02127c72","/ec/shopping"),i={product:t,quantity:a};this.axios.patch(s,i).then((function(){e.$bus.$emit("notice-user","課程數量改變成功"),e.isLoading=!1,e.getCart()})).catch((function(){e.isLoading=!1}))},createOrder:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api","/").concat("e6527241-dd52-4bd8-94eb-eb0e02127c72","/ec/orders"),e=Object(r["a"])({},this.formdata);this.axios.post(a,e).then((function(a){a.data.data.id&&t.$router.push("/checkout/".concat(a.data.data.id)),t.isLoading=!1})).catch((function(){t.$bus.$emit("notice-user","訂單送出失敗，再檢查看看"),t.isLoading=!1}))}}},c=l,d=e("2877"),u=Object(d["a"])(c,s,i,!1,null,null,null);a["default"]=u.exports},"99af":function(t,a,e){"use strict";var s=e("23e7"),i=e("d039"),r=e("e8b5"),o=e("861d"),n=e("7b0b"),l=e("50c4"),c=e("8418"),d=e("65f0"),u=e("1dde"),v=e("b622"),m=e("2d00"),p=v("isConcatSpreadable"),f=9007199254740991,_="Maximum allowed index exceeded",b=m>=51||!i((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),g=u("concat"),C=function(t){if(!o(t))return!1;var a=t[p];return void 0!==a?!!a:r(t)},h=!b||!g;s({target:"Array",proto:!0,forced:h},{concat:function(t){var a,e,s,i,r,o=n(this),u=d(o,0),v=0;for(a=-1,s=arguments.length;a<s;a++)if(r=-1===a?o:arguments[a],C(r)){if(i=l(r.length),v+i>f)throw TypeError(_);for(e=0;e<i;e++,v++)e in r&&c(u,v,r[e])}else{if(v>=f)throw TypeError(_);c(u,v++,r)}return u.length=v,u}})},d178:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("nav",{staticClass:"navbar navbar-dark bg-dark navbar-expand-lg fixed-top shadow"},[e("router-link",{staticClass:"navbar-brand logo",attrs:{to:"/"}},[t._v(" FitSpace ")]),t._m(0),e("div",{staticClass:"collapse navbar-collapse justify-content-end",attrs:{id:"navbarNavAltMarkup"}},[e("div",{staticClass:"navbar-nav"},[e("router-link",{staticClass:"nav-item nav-link mr-4",attrs:{to:"/products"}},[t._v(" 課程列表 ")]),e("router-link",{staticClass:"nav-item nav-link mr-4",attrs:{to:"/cart"}},[t._v(" 購物車 ")]),e("router-link",{staticClass:"nav-item nav-link mr-4",attrs:{to:"/login"}},[t._v("登入")]),e("router-link",{staticClass:"nav-item nav-link",attrs:{to:"/admin/products"}},[t._v("後台")])],1)])],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}],r={data:function(){return{}}},o=r,n=e("2877"),l=Object(n["a"])(o,s,i,!1,null,null,null);a["a"]=l.exports},fd2d:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"bg-dark py-5"},[e("div",{staticClass:"container"},[e("div",{staticClass:"d-flex align-items-center justify-content-between text-white mb-md-7 mb-4"},[e("a",{staticClass:"text-white h4 logo",attrs:{href:"./index.html"}},[t._v("FitSpace")])]),e("div",{staticClass:"d-flex flex-column flex-md-row\n    justify-content-between align-items-md-end\n    align-items-start text-white"},[e("div",{staticClass:"mb-md-0 mb-1"},[e("p",{staticClass:"mb-0"},[t._v("02-3456-7890")]),e("p",{staticClass:"mb-0"},[t._v("service@mail.com")])]),e("p",{staticClass:"mb-0"},[t._v("© 2020 LOGO All Rights Reserved.")])])])])}],r={data:function(){return{}}},o=r,n=e("2877"),l=Object(n["a"])(o,s,i,!1,null,null,null);a["a"]=l.exports}}]);
//# sourceMappingURL=chunk-87eb13c2.79e69d3d.js.map